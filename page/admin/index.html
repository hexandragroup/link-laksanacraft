<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Admin Demo — LaksanaCraft</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4" style="background:#f4f6fb;">
<div class="container">
  <h3>Admin Demo — Produk</h3>
  <div class="table-responsive mt-3">
    <table class="table table-bordered table-striped" id="productTable">
      <thead><tr></tr></thead>
      <tbody></tbody>
    </table>
  </div>
</div>

<script>
const API_BASE = "https://ancient-king-d447.hendraslaksono.workers.dev";
const FILE = "products1.json";

async function loadProducts() {
  try {
    const res = await fetch(`${API_BASE}/products?file=${FILE}`);
    const data = await res.json();
    renderTable(data);
  } catch (e) {
    alert("Failed to load JSON: " + e.message);
  }
}

function renderTable(data) {
  const table = document.getElementById("productTable");
  const thead = table.querySelector("thead tr");
  const tbody = table.querySelector("tbody");

  if (!data.length) return;

  const cols = Object.keys(data[0]);
  thead.innerHTML = cols.map(c => `<th>${c}</th>`).join("");
  tbody.innerHTML = data.map(row => {
    return "<tr>" + cols.map(c => {
      let val = row[c];
      if(Array.isArray(val)) val = JSON.stringify(val);
      return `<td>${val}</td>`;
    }).join("") + "</tr>";
  }).join("");
}

loadProducts();
</script>
</body>
</html>