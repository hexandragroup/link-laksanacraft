<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pencarian Produk - Laksana Handicraft</title>
  <meta name="description" content="Pencarian Produk Laksana Handicraft" />

  <style>
    body { font-family:sans-serif; background:linear-gradient(to bottom,#eee,#ccc); padding:30px; margin:0; }
    .container { max-width:700px; margin:auto; background:#f2f2f2; padding:22px; border-radius:14px; box-shadow:0 8px 16px rgba(0,0,0,.1); text-align:center; }
    img.logo { width:100px; border-radius:50%; margin-bottom:12px; }
    h1 { font-size: 20px; margin-bottom: 10px; }
    h1 a { text-decoration: none; color: #222; }
    h1 a:hover { text-decoration: underline; }
    p { color:#444; margin-bottom:16px; }
    p.sublead { font-size:15px; font-weight:bold; margin-bottom:18px; }

    /* Translate */
    .translate-box { margin-bottom:20px; }
    .btn { display:block; margin:10px auto; padding:12px 14px; background:#fff; color:#222; border-radius:8px; border:1px solid #bbb; cursor:pointer; transition:.2s; }
    .btn:hover { background:#e6e6e6; }

    /* Form */
    form .input-row { margin-top:12px; text-align:left; }
    label.small { font-size:13px; color:#666; display:block; margin-bottom:4px; }
    select, button {
      width:100%; max-width:420px; padding:10px;
      border-radius:8px; border:1px solid #bbb;
      margin:6px auto; display:block; box-sizing:border-box;
    }
    button[type="submit"] { background:#333; color:#fff; border:none; padding:12px; cursor:pointer; }
    button[type="submit"]:hover { background:#444; }

    #results { margin-top:18px; text-align:left; }
    .result { background:#fff; border:1px solid #ddd; padding:12px; border-radius:8px; margin-bottom:12px; }
    .result p { margin:6px 0; }
    table.variant-table { width:100%; border-collapse:collapse; margin:8px 0; font-size:14px; }
    table.variant-table th, table.variant-table td { border:1px solid #ccc; padding:6px 8px; text-align:left; }
    table.variant-table th { background:#f9f9f9; }
    footer { margin-top:25px; font-size:12px; color:#666; }
  </style>
</head>
<body>
  <div class="container">
    <img src="https://raw.githubusercontent.com/hexandragroup/laksanacraft-assets/main/Logo_Laksana_Handicraft.png" alt="Logo" class="logo" />
    <h1><a href="https://link.laksanacraft.my.id/">Kerajinan Wayang Kulit Sewon | Laksana Handicraft</a></h1>
    <p><em>"Kerajinan Nusantara, Warisan Dunia"</em></p>
    <p class="sublead">ğŸ” Pencarian Produk Detail</p>

    <!-- ğŸŒ Translate -->
    <div class="translate-box">
      <select class="btn" onchange="doGTranslate(this);">
        <option value="">ğŸŒ Pilih Bahasa</option>
        <option value="id|id">ğŸ‡®ğŸ‡© Indonesia</option>
        <option value="id|en">ğŸ‡¬ğŸ‡§ English</option>
        <option value="id|ms">ğŸ‡²ğŸ‡¾ Melayu</option>
        <option value="id|ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
        <option value="id|zh-CN">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
        <option value="id|ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
        <option value="id|fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
        <option value="id|de">ğŸ‡©ğŸ‡ª Deutsch</option>
        <option value="id|es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
      </select>
    </div>

    <!-- ğŸ” Filter -->
    <form id="searchForm">
      <div class="input-row">
        <label class="small" for="tokoh">Nama Tokoh</label>
        <select id="tokoh">
          <option value="">-- Pilih Tokoh --</option>
          <option value="arjuna">Arjuna</option>
          <option value="bima">Bima</option>
          <option value="puntadewa">Puntadewa</option>
          <option value="nakula">Nakula</option>
          <option value="sadewa">Sadewa</option>
          <option value="custom">Custom Tokoh</option>
        </select>
      </div>

      <div class="input-row">
        <label class="small" for="ukuran">Ukuran Produk</label>
        <select id="ukuran">
          <option value="">-- Pilih Ukuran --</option>
          <option value="miniatur">Miniatur</option>
          <option value="20, 25, 30cm">20, 25, 30cm</option>
          <option value="standar">Standar Pedalangan</option>
        </select>
      </div>

      <div class="input-row">
        <label class="small" for="kualitas">Kualitas Produk</label>
        <select id="kualitas">
          <option value="">-- Pilih Kualitas --</option>
          <option value="murah">Murah</option>
          <option value="alusan">Alusan</option>
        </select>
      </div>

      <button type="submit">Cari Produk</button>
    </form>

    <!-- Hasil -->
    <div id="results"></div>

    <footer>
      &copy; <span id="year"></span> Laksana Handicraft Â· Bantul, D.I.Yogyakarta, Indonesia
    </footer>
  </div>

  <!-- Tahun -->
  <script>
    const startYear = 1990;
    const currentYear = new Date().getFullYear();
    document.getElementById("year").textContent =
      currentYear > startYear ? startYear + "â€“" + currentYear : startYear;
  </script>

  <!-- Filter Pencarian -->
  <script>
    let products = [];
    fetch("products.json").then(r => r.json()).then(data => products = data);

    const labels = {
      tokoh: { arjuna:"Arjuna", bima:"Bima", puntadewa:"Puntadewa", nakula:"Nakula", sadewa:"Sadewa", custom:"Custom Tokoh" },
      ukuran: { miniatur:"Miniatur", "20, 25, 30cm":"20, 25, 30cm", standar:"Standar Pedalangan" },
      kualitas: { murah:"Murah", alusan:"Alusan" }
    };

    document.getElementById("searchForm").addEventListener("submit", e => {
      e.preventDefault();
      const tokoh = document.getElementById("tokoh").value;
      const ukuran = document.getElementById("ukuran").value;
      const kualitas = document.getElementById("kualitas").value;
      const out = document.getElementById("results");
      out.innerHTML = "";

      const filtered = products.filter(p =>
        (tokoh ? p.tokoh === tokoh : true) &&
        (ukuran ? p.ukuran === ukuran : true) &&
        (kualitas ? p.kualitas === kualitas : true)
      );

      if (filtered.length === 0) {
        out.innerHTML = "<p>Tidak ada produk ditemukan.</p>";
        return;
      }

      filtered.forEach(p => {
        let table = "";
        if (p.varian) {
          table = "<table class='variant-table'><tr><th>Ukuran</th><th>Harga</th></tr>";
          p.varian.forEach(v => { table += `<tr><td>${v.size}</td><td>${v.harga}</td></tr>`; });
          table += "</table>";
        }
        out.innerHTML += `
          <div class="result">
            <p><strong>Tokoh:</strong> ${labels.tokoh[p.tokoh] || p.tokoh}</p>
            <p><strong>Kualitas:</strong> ${labels.kualitas[p.kualitas] || p.kualitas}</p>
            ${table}
            <p><a href="${p.link}" target="_blank">ğŸ”— Detail Produk</a></p>
          </div>`;
      });
    });
  </script>

  <!-- Translate -->
  <div id="google_translate_element" style="display:none;"></div>
  <script>
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({pageLanguage: 'id'}, 'google_translate_element');
    }
    function doGTranslate(el) {
      if (el.value === '') return;
      var lang = el.value.split('|')[1];
      if (lang === 'id') { window.location.href = window.location.origin + window.location.pathname; return; }
      var select = document.querySelector('.goog-te-combo');
      if (select) { select.value = lang; select.dispatchEvent(new Event('change')); }
    }
  </script>
  <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</body>
</html>