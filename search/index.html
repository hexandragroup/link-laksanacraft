<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pencarian Produk - Laksana Handicraft</title>
  <meta name="description" content="Pencarian Produk Laksana Handicraft" />
  <style>
    body { font-family: sans-serif; background: linear-gradient(to bottom, #eeeeee, #cccccc); padding: 30px; margin: 0; }
    .container { max-width: 500px; margin: auto; background: #f2f2f2; padding: 25px; border-radius: 16px; box-shadow: 0 8px 16px rgba(0,0,0,0.1); text-align: center; }
    img.logo { width: 100px; border-radius: 50%; margin-bottom: 15px; }
    h1 { font-size: 20px; margin-bottom: 10px; }
    h1 a { text-decoration: none; color: #222; }
    h1 a:hover { text-decoration: underline; }
    p { color: #444; margin-bottom: 16px; }
    p.sublead { font-size: 15px; font-weight: bold; margin-bottom: 18px; }
    .translate-box { margin-bottom: 20px; }
    .btn { display: block; margin: 10px auto; padding: 12px 14px; background: #fff; color: #222; border-radius: 8px; border: 1px solid #bbb; cursor: pointer; transition: .2s; max-width: 420px; }
    .btn:hover { background: #e6e6e6; }
    form .input-row { margin-top: 12px; text-align: left; }
    label.small { font-size: 13px; color: #666; display: block; margin-bottom: 4px; }
    select, input, button { width: 100%; max-width: 420px; padding: 10px; border-radius: 8px; border: 1px solid #bbb; margin: 6px auto; display: block; box-sizing: border-box; }
    button[type="submit"] { background: #333; color: #fff; border: none; padding: 12px; cursor: pointer; }
    button[type="submit"]:hover { background: #444; }
    #results { margin-top: 18px; text-align: left; }
    .result { background: #fff; border: 1px solid #ddd; padding: 12px; border-radius: 8px; margin-bottom: 12px; }
    .result p { margin: 6px 0; }
    table.variant-table { width: 100%; border-collapse: collapse; margin: 8px 0; font-size: 14px; }
    table.variant-table th, table.variant-table td { border: 1px solid #ccc; padding: 6px 8px; text-align: left; }
    table.variant-table th { background: #f9f9f9; }
    footer { margin-top: 30px; font-size: 12px; color: #666; }
    html, body { height: 100% !important; background: linear-gradient(to bottom, #eeeeee, #cccccc) !important; background-attachment: fixed !important; background-repeat: no-repeat !important; background-size: cover !important; }
  </style>
</head>
<body>
  <div class="container">
    <img src="https://raw.githubusercontent.com/hexandragroup/laksanacraft-assets/main/Logo_Laksana_Handicraft.png" alt="Logo" class="logo" />
    <h1><a href="https://link.laksanacraft.my.id/">Kerajinan Wayang Kulit Sewon | Laksana Handicraft</a></h1>
    <p><em>"Kerajinan Nusantara, Warisan Dunia"</em></p>
    <p class="sublead">üîé Pencarian Produk</p>

    <!-- Input dengan datalist -->
    <form id="searchForm">
      <div class="input-row">
        <label class="small" for="tokoh">Nama Tokoh</label>
        <input list="tokoh-list" id="tokoh" placeholder="Ketik nama tokoh...">
        <datalist id="tokoh-list"></datalist>
      </div>

      <div class="input-row">
        <label class="small" for="ukuran">Ukuran Produk</label>
        <select id="ukuran">
          <option value="">-- Pilih Ukuran --</option>
          <option value="miniatur">Miniatur</option>
          <option value="20, 25, 30cm">20, 25, 30cm</option>
          <option value="standar">Standar Pedalangan</option>
        </select>
      </div>

      <div class="input-row">
        <label class="small" for="kualitas">Kualitas Produk</label>
        <select id="kualitas">
          <option value="">-- Pilih Kualitas --</option>
          <option value="murah">Murah</option>
          <option value="sedang">Sedang</option>
          <option value="alusan">Alusan</option>
        </select>
      </div>

      <div style="margin-top:12px;">
        <button type="submit">Filter Produk</button>
      </div>
    </form>

    <div id="results"></div>

    <footer>&copy; <span id="year"></span> Laksana Handicraft ¬∑ Bantul, D.I.Yogyakarta, Indonesia</footer>
  </div>

  <script>
    const startYear = 1990;
    const currentYear = new Date().getFullYear();
    document.getElementById("year").textContent = currentYear > startYear ? startYear + "‚Äì" + currentYear : startYear;
  </script>

  <script>
let products = [];
const labels = { ukuran: { miniatur: "Miniatur", "20, 25, 30cm": "20, 25, 30cm", standar: "Standar Pedalangan" }, kualitas: { murah: "Murah", sedang: "Sedang", alusan: "Alusan" } };
const groupAliases = { punakawan: ["semar","gareng","petruk","bagong"], pandawa: ["arjuna","nakula","sadewa","bima","puntadewa"] };

function escapeHtml(s){return s?String(s).replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])):'';}
function escapeAttr(s){return escapeHtml(s);}
function capitalize(s){return s?s.charAt(0).toUpperCase()+s.slice(1):"";}
document.getElementById("searchForm").addEventListener("submit",e=>{e.preventDefault();doFilterSearch();});
function matchesGroup(tokoh,group){return groupAliases[group]?.some(t=>tokoh.includes(t));}
function doFilterSearch(){const tokoh=document.getElementById("tokoh").value.toLowerCase();const ukuran=document.getElementById("ukuran").value;const kualitas=document.getElementById("kualitas").value;const out=document.getElementById("results");out.innerHTML="";
if(!tokoh&&!ukuran&&!kualitas){out.innerHTML="<p style='color:red;'>‚ö†Ô∏è Silakan pilih minimal satu kriteria pencarian.</p>";return;}
const filtered=products.filter(p=>(tokoh?(p.tokoh.includes(tokoh)||(tokoh==="punakawan"&&matchesGroup(p.tokoh,"punakawan"))||(tokoh==="pandawa"&&matchesGroup(p.tokoh,"pandawa"))):true)&&(ukuran?(ukuran==="20, 25, 30cm"?["20cm","25cm","30cm"].some(u=>Array.isArray(p.ukuran)?p.ukuran.includes(u):p.ukuran===u):ukuran==="standar"?(Array.isArray(p.ukuran)?p.ukuran.includes("Standar Pedalangan"):p.ukuran==="Standar Pedalangan"):(Array.isArray(p.ukuran)?p.ukuran.includes(ukuran):p.ukuran===ukuran)):true)&&(kualitas?p.kualitas===kualitas:true));
renderResults(filtered);}
function renderResults(list){const out=document.getElementById("results");if(list.length===0){out.innerHTML+="<p>Tidak ada produk ditemukan.</p>";return;}
list.forEach(p=>{let tokohList=p.tokoh.map(capitalize);if(matchesGroup(p.tokoh,"punakawan"))tokohList.unshift("(Punakawan)");if(matchesGroup(p.tokoh,"pandawa"))tokohList.unshift("(Pandawa)");let varianTable="";if(p.varian&&Array.isArray(p.varian)){varianTable+="<table class='variant-table'><tr><th>Ukuran</th><th>Harga</th></tr>";p.varian.forEach(v=>{varianTable+=`<tr><td>${escapeHtml(v.size)}</td><td>${escapeHtml(v.harga)}</td></tr>`});varianTable+="</table>";}
let ukuranLabel=Array.isArray(p.ukuran)?p.ukuran.map(u=>labels.ukuran[u]||u).join(", "):labels.ukuran[p.ukuran]||p.ukuran;
out.innerHTML+=`<div class="result"><p><strong>Tokoh:</strong> ${escapeHtml(tokohList.join(", "))}</p><p><strong>Kualitas:</strong> ${escapeHtml(labels.kualitas[p.kualitas]||p.kualitas)}</p><p><strong>Ukuran:</strong> ${escapeHtml(ukuranLabel)}</p>${varianTable}<p><a href="${escapeAttr(p.link)}" target="_blank">üîó Detail Produk</a></p></div>`;});}
function getUniqueTokoh(products){const set=new Set();products.forEach(p=>p.tokoh.forEach(t=>set.add(t)));return Array.from(set).sort();}
function populateTokohDropdown(products){const tokohList=getUniqueTokoh(products);const dataList=document.getElementById("tokoh-list");tokohList.forEach(t=>{if(!["punakawan","pandawa"].includes(t.toLowerCase())){const opt=document.createElement("option");opt.value=capitalize(t);dataList.appendChild(opt);}});}
fetch("products.json").then(r=>r.json()).then(data=>{products=data;populateTokohDropdown(products);}).catch(()=>{document.getElementById("results").innerHTML="<p style='color:red;'>Gagal memuat data produk.</p>";});
  </script>
</body>
</html>