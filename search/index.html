<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cari Produk - Laksana Handicraft</title>
  <meta name="description" content="Pencarian Produk Laksana Handicraft" />
  <style>
    body { font-family:sans-serif; background:linear-gradient(to bottom,#eee,#ccc); padding:30px; margin:0; }
    .container { max-width:700px; margin:auto; background:#f2f2f2; padding:22px; border-radius:14px; box-shadow:0 8px 16px rgba(0,0,0,.1); text-align:center; }
    img.logo { width:100px; border-radius:50%; margin-bottom:12px; }
    h1 { font-size:20px; margin:6px 0 12px; }
    p.lead { color:#444; margin-bottom:18px; }
    .btn { display:block; width:100%; max-width:420px; margin:10px auto; padding:12px 14px; background:#fff; color:#222; border-radius:8px; border:1px solid #bbb; text-decoration:none; cursor:pointer; transition:all .18s ease; box-sizing:border-box; }
    .btn:hover { background:#eaeaea; transform:scale(1.02); }
    form .input-row { margin-top:12px; }
    select, button { width:100%; max-width:420px; padding:10px; border-radius:8px; border:1px solid #bbb; box-sizing:border-box; margin:6px auto; }
    button[type="submit"] { background:#333; color:#fff; border:none; cursor:pointer; padding:12px; }
    #results { margin-top:18px; text-align:left; }
    .result { background:#fff; border:1px solid #ddd; padding:12px; border-radius:8px; margin-bottom:12px; }
    .result p { margin:6px 0; }
    .small { font-size:13px; color:#666; }
    table.variant-table { width:100%; border-collapse:collapse; margin:8px 0; font-size:14px; }
    table.variant-table th, table.variant-table td { border:1px solid #ccc; padding:6px 8px; text-align:left; }
    table.variant-table th { background:#f9f9f9; }
  </style>
</head>
<body>
  <div class="container">
    <img src="https://raw.githubusercontent.com/hexandragroup/laksanacraft-assets/main/Logo_Laksana_Handicraft.png" alt="Logo" class="logo" />
    <h1>Pencarian Produk Laksana Handicraft</h1>
    <p class="lead"><em>Kerajinan Nusantara, Warisan Dunia</em></p>

    <form id="searchForm">
      <div class="input-row">
        <label class="small" for="tokoh">Nama Tokoh</label>
        <select id="tokoh">
          <option value="">-- Pilih Tokoh --</option>
          <option value="arjuna">Arjuna</option>
          <option value="bima">Bima</option>
          <option value="puntadewa">Puntadewa</option>
          <option value="nakula">Nakula</option>
          <option value="sadewa">Sadewa</option>
          <option value="custom">Custom Tokoh</option>
        </select>
      </div>

      <div class="input-row">
        <label class="small" for="ukuran">Ukuran Produk</label>
        <select id="ukuran">
          <option value="">-- Pilih Ukuran --</option>
          <option value="miniatur">Miniatur</option>
          <option value="20, 25, 30cm">20, 25, 30cm</option>
          <option value="standar">Standar Pedalangan</option>
        </select>
      </div>

      <div class="input-row">
        <label class="small" for="kualitas">Kualitas Produk</label>
        <select id="kualitas">
          <option value="">-- Pilih Kualitas --</option>
          <option value="murah">Murah</option>
          <option value="alusan">Alusan</option>
        </select>
      </div>

      <div style="margin-top:12px;">
        <button type="submit">Cari Produk</button>
      </div>
    </form>

    <div id="results"></div>
    <p class="small" style="margin-top:18px;">&copy; Laksana Handicraft</p>
  </div>

  <script>
    let products = [];
    fetch("products.json")
      .then(r => r.json())
      .then(data => products = data)
      .catch(err => {
        document.getElementById("results").innerHTML = "<p style='color:red;'>Gagal memuat data produk.</p>";
      });

    const labels = {
      tokoh: { arjuna:"Arjuna", bima:"Bima", puntadewa:"Puntadewa", nakula:"Nakula", sadewa:"Sadewa", custom:"Custom Tokoh" },
      ukuran: { miniatur:"Miniatur", "20, 25, 30cm":"20, 25, 30cm", standar:"Standar Pedalangan" },
      kualitas: { murah:"Murah", alusan:"Alusan" }
    };

    document.getElementById("searchForm").addEventListener("submit", function(e){
      e.preventDefault();
      const tokoh = document.getElementById("tokoh").value;
      const ukuran = document.getElementById("ukuran").value;
      const kualitas = document.getElementById("kualitas").value;
      const out = document.getElementById("results");
      out.innerHTML = "";

      if (!tokoh && !ukuran && !kualitas) {
        out.innerHTML = "<p style='color:red;'>‚ö†Ô∏è Silakan pilih minimal satu kriteria pencarian.</p>";
        return;
      }

      const filtered = products.filter(p =>
        (tokoh ? p.tokoh === tokoh : true) &&
        (ukuran ? p.ukuran === ukuran : true) &&
        (kualitas ? p.kualitas === kualitas : true)
      );

      if (filtered.length === 0) {
        out.innerHTML = "<p>Tidak ada produk ditemukan.</p>";
        return;
      }

      filtered.forEach(p => {
        let varianTable = "";
        if (p.varian && Array.isArray(p.varian)) {
          varianTable += "<table class='variant-table'><tr><th>Ukuran</th><th>Harga</th></tr>";
          p.varian.forEach(v => {
            varianTable += `<tr><td>${escapeHtml(v.size)}</td><td>${escapeHtml(v.harga)}</td></tr>`;
          });
          varianTable += "</table>";
        }

        out.innerHTML += `
          <div class="result">
            <p><strong>Tokoh:</strong> ${escapeHtml(labels.tokoh[p.tokoh] || p.tokoh)}</p>
            <p><strong>Kualitas:</strong> ${escapeHtml(labels.kualitas[p.kualitas] || p.kualitas)}</p>
            ${varianTable}
            <p><a href="${escapeAttr(p.link)}" target="_blank">üîó Detail Produk</a></p>
          </div>
        `;
      });
    });

    function escapeHtml(s){ return (s===undefined||s===null) ? '' : String(s).replace(/[&<>"']/g, function(m){ return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]); }); }
    function escapeAttr(s){ return escapeHtml(s); }
  </script>
</body>
</html>